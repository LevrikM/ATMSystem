#include <iostream>
#include <ctime>
using namespace std;
struct MoneyGenerator
{
	unsigned seed = 0;
};

void initGenerator(MoneyGenerator& generator)
{
	generator.seed = unsigned(time(nullptr));
}
unsigned random(MoneyGenerator& generator, unsigned min, unsigned max)
{
	generator.seed = (generator.seed * 123);
	return (generator.seed % (max + 1 - min)) + min;
}
int main()
{
	setlocale(LC_ALL, "russian");
	int p = 4; // процент комиссии банкомата при снятии наличных
	int v = 2; // процент комисси банкомата при пополнение мобильного счета
	long long n; // переменная для номера телефона
	int q = 200; // кнопка 1
	int w = 500; // кнопка 2
	int e = 1000; // кнопка 3
	int f = 0; // конечный баланс карты,
	int y, x, a, k, r, i, b; // y - выбор снятие наличных, пополнение мобильного счета, x - выбор кнопки пользователем, a - начальный баланс на карточке, k - вычисление комиссии от суммы которую пользователь хочет снять,  r - сумма которую выберет пользователь, i - для генерации рандомного баланса, b - переменная для суммы пополнения
	int t = 1;
	MoneyGenerator generator;
	initGenerator(generator);
	for (i = 0; i < 10; ++i)
	{
		a = random(generator, 300, 2000); // диапазон баланса от min до max
	}
	cout << "\t\t\t\t|---------МЕНЮ БАНКОМАТА---------|\t\t\t\t      @Misha Krasnoboky\n\t\t\t\t     На вашем балансе: " << a << "UAH\n\t\t\t     Выберите какую операцию вы хотите осуществить\n\t\t\t\t  1 - Пополнение мобильного счета\n\t\t\t\t\t2 - Снятие наличных\nКнопка\t\t\t\t\t   3 - Выход\n:";
	cin >> y;
	if (y == 1)
	{
		cout << "Введите номер телефона: ";
		cin >> n;
		if (n > 380670000000)
		{
			cout << "Введите сумму пополнения: ";
			cin >> b;
			if (b > 0 && b < a)
			{
				k = (b * v) / 100;
				f = a - b - k;
				cout << "Вы удачно пополнили счет номера +" << n << " на сумму " << b << "UAH. Комиссия составила: " << k << "UAH. Баланс карты: " << f << "UAH.\n\n";
			}
		}
		else { cout << "Неверный формат номера, номер должен быть такого формата: 380xxxxxxxxx (12 цифр)\n\n"; }
	}
	else if (y==2)
	{
		cout << "\t\t\t\t Выберите сколько вы хотите снять\n\t\t\t\t Нажмите на соответствующую кнопку\n\t\t\t\t\t    1 - 200UAH\n\t\t\t\t\t    2 - 500UAH\n\t\t\t\t\t    3 - 1000UAH\nКнопка\t\t\t\t\t    4 - Своя сумма\n:";
		cin >> x;
		if (x == 1)
		{
			if (a >= q)
			{
				k = (q * p) / 100; // Комиссия банкомата
				f = a - q - k;
				cout << "Вы сняли со счета 200UAH, ваш баланс - " << f << "UAH. Комиссия составила: " << k << "UAH\n\t\t\t\t\t|~~~~~~~~~|\n\t\t\t\t\t|   200   |\n\t\t\t\t\t|~~~~~~~~~|\n";
			}
			else { cout << "У вас недостаточно средств на балансе.\n"; }
		}
		if (x == 2)
		{
			if (a >= w)
			{
				k = (w * p) / 100; // Комиссия банкомата
				f = a - w - k;
				cout << "Вы сняли со счета 500UAH, ваш баланс - " << f << "UAH. Комиссия составила: " << k << "UAH\n\t\t\t\t\t|~~~~~~~~~~~|\n\t\t\t\t\t|    500    |\n\t\t\t\t\t|~~~~~~~~~~~|\n";
			}
			else { cout << "У вас недостаточно средств на балансе.\n"; }
		}
		if (x == 3)
		{
			if (a >= e)
			{
				k = (e * p) / 100; // Комиссия банкомата
				f = a - e - k;
				cout << "Вы сняли со счета 1000UAH, ваш баланс - " << f << "UAH. Комиссия составила: " << k << "UAH\n\t\t\t\t\t|~~~~~~~~~~~~|\n\t\t\t\t\t|    1000    |\n\t\t\t\t\t|~~~~~~~~~~~~|\n";
			}
			else { cout << "У вас недостаточно средств на балансе.\n"; }
		}
		if (x == 4)
		{
			cout << "Введите сумму которую вы хотите снять: ";
			cin >> r;
			if (r % 10 == 0)
			{
				if (a >= r)
				{
					k = (r * p) / 100; // Комиссия банкомата
					f = a - r - k;
					if (r < 1000)
						cout << "Вы сняли со счета " << r << "UAH, ваш баланс - " << f << "UAH. Комиссия составила: " << k << "UAH\n\t\t\t\t\t|~~~~~~~~~~~~|\n\t\t\t\t\t|    " << r << "     |\n\t\t\t\t\t|~~~~~~~~~~~~|\n";
					else { cout << "Вы сняли со счета " << r << "UAH, ваш баланс - " << f << "UAH. Комиссия составила: " << k << "UAH\n\t\t\t\t\t|~~~~~~~~~~~~|\n\t\t\t\t\t|    " << r << "    |\n\t\t\t\t\t|~~~~~~~~~~~~|\n"; }
				}
				else { cout << "У вас недостаточно средств на балансе.\n"; }
			}
			else { cout << "Вы только можете целую сумму, например: 100UAH, 110UAH, 120UAH.\nСуммы типа: " << r << "UAH и так далее недоступны для снятия.\n"; }
			t = 0;
		}
		if (x != 1 && x != 2 && x != 3 && x != 4)
		{
			cout << ("Данная кнопка не используеться. Попробуйте ещё раз.\n\n");
			t = 0;
		}
	if (f < 0)
	{
			cout << "Мы активировали вам кредитный счет так как вам не хватило денег на уплату комиссии в " << k << "UAH.\nВаш кредитный счет составляет: " << f << "UAH.\nСпасибо за использование наших услуг.\n\n";
	}
	if (t == 1)
	{
	cout << "Спасибо за использование наших услуг.\n\n";
	}
	}
	else if (y == 3)
	{
		cout << "Будем рады видеть Вас ещё раз!\n\n";
	}
	else
	{
		cout << "Данная кнопка не используеться. Попробуйте ещё раз.\n\n";
	}
}
